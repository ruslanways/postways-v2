{% extends 'diary/base.html' %}

{% block title %} author#{{object.pk}} {{ object.username }} {% endblock %}

{% block content %}
 
<h2>
    {% if user.is_staff %}
    {{object.username}} posts:
    {% else %}
    My posts:
    {% endif %}
    {{ object.post_set.count }}
</h2> 
<br>

{% for post in  page_obj %}
<div class="post">
<div>
<a href="{% url 'post-detail' post.pk %}"><h3 class="title">{{ post.title }}</h3></a>
<p class="author">{{ post.created|date }} at {{ post.created|time:"H:i" }}
    {% if not post.published %}
    <br><b>*unpublished</b>
    {% endif %}
<p class="title">
    <a href="{% url 'post-detail' post.pk %}" class="post-content">
    <span class="short-post">{{ post.content|truncatechars:100 }}</span>
    </a>
    <br>
    {% if user.is_authenticated and post.id in liked_by_user %}
    <a href="{% url 'like-toggle-api' %}" id="{{ post.id }}" class="like"><span class="heart">&#10084;</span> <span class="count">{{ post.like__count }}</span></a>
    {% elif user.is_authenticated %}
    <a href="{% url 'like-toggle-api' %}" id="{{ post.id }}" class="like"><span class="heart">&#9825;</span> <span class="count">{{ post.like__count }}</span></a>
    {% else %}
    <a href="{% url 'login' %}" id="{{ post.id }}" class="like"><span class="heart">&#9825;</span> <span class="count">{{ post.like__count }}</span></a>
    {% endif %}
</p>
</div>

{% if post.image %}
<div>
<a href="{% url 'post-detail' post.pk %}">
<img src="{{ post.image.url }}" alt="" class="rounded float-left post-img">
</a>
</div>
{% endif %}

</div>
<hr>
<br>
{% endfor %}


{% endblock %}

