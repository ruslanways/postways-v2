{# Canonical post card (matches homepage feed layout) #}
<article class="post-card">
  <div class="post-card-header">
    {% if post.image %}
      <a href="{% url 'post-detail' post.pk %}">
        <img
          src="{% if post.thumbnail %}{{ post.thumbnail.url }}{% else %}{{ post.image.url }}{% endif %}"
          alt="{{ post.title }}"
          class="post-card-image"
        >
      </a>
    {% endif %}

    <div class="post-card-content">
      <div class="post-card-meta">
        <a href="{% url 'author-detail' post.author.pk %}" class="post-card-author">
          {{ post.author.username }}
        </a>
        <span class="post-card-date">
          {{ post.created|date }} at {{ post.created|time:"H:i" }}
        </span>
        {% if not post.published %}
          <span class="text-muted">*unpublished</span>
        {% endif %}

        {% if user.is_authenticated and post.has_liked %}
          <a href="{% url 'like-toggle-api' %}" id="{{ post.id }}" class="like is-liked">
            <span class="heart">♥</span>
            <span class="count">{{ post.like_count }}</span>
          </a>
        {% elif user.is_authenticated %}
          <a href="{% url 'like-toggle-api' %}" id="{{ post.id }}" class="like">
            <span class="heart">♡</span>
            <span class="count">{{ post.like_count }}</span>
          </a>
        {% else %}
          <a href="{% url 'login' %}" id="{{ post.id }}" class="like">
            <span class="heart">♡</span>
            <span class="count">{{ post.like_count }}</span>
          </a>
        {% endif %}
      </div>

      <h3 class="post-card-title">
        <a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a>
      </h3>

      <p class="post-card-excerpt">
        {{ post.content }}
      </p>
    </div>
  </div>
</article>

